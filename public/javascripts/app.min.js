/*! taskTracker 2015-10-12 */
var app=angular.module("taskApp",[]);app.controller("MainController",["$scope","$http",function(a,b){a.newTask={},a.freshTask="",a.newTaskList=[];var c=function(){return b.get("/gettask").then(function(b){if(200!==b.status)throw new Error("Failed to get tasks");a.newTaskList=[];for(var c=0;c<b.data.length;c++)a.newTaskList.push(b.data[c]);return console.log("This is the current database: "+a.newTaskList),b.data})};a.addData=function(d){var e='{"item": "'+a.freshTask+'", "done":"false"}';console.log("attempting to add to database "+e),b({method:"POST",url:"/taskRouter/newtask",data:e}).then(function(a){console.log(a),c()})},a.removeDone=function(){for(var b=0;b<a.newTaskList.length;b++)console.log(a.newTaskList.length),a.newTaskList[b].done===!0&&(a.newTaskList.splice(b,1),b--)},a.sort=function(){for(var b=0;b<a.newTaskList.length;b++)if(1==a.newTaskList[b].done){console.log(a.newTaskList[b]);var c=a.newTaskList.splice(b,1);return a.newTaskList.push(c[0]),a.newTaskList}},a.changeDataBoolean=function(c){c=a.newTaskList[c],console.log("task item data boolean: "+c._id);var d=c;b({method:"PUT",url:"taskRouter/update",data:d})},a.removeAllDone=function(){b({method:"POST",url:"taskRouter/remove"}).then(function(a,b){return console.log("reloading tasks next"),c(),b.data})},c()}]);